import{c as Ne,h as we,r as u,i as Se,j as e,P as M,k,n as Ce,e as G,a as Fe,f as Ie,d as Te,b as Ae}from"./index-DJIYZ9ez.js";import{F as y,a as N,b as w,c as S,d as C,e as F,o as Ve,s as j,u as Pe,n as Re,l as Ee,f as De,g as Me,t as ke}from"./form-BhG10zMi.js";import{c as ee,R as _e,I as Oe}from"./index-BDhHQrcu.js";import{u as $e}from"./index-IuGORk07.js";import{u as Ge}from"./Combination-B1OjXE4j.js";import{C as I,a as T,b as A,c as V,d as P,e as R}from"./card-DRUPd1Dr.js";import{C as f}from"./Button-Bq_qZ9kv.js";import{a as Le}from"./agentService-DNIFqXhy.js";import{H as W,F as Q}from"./Footer-Bqylm3V6.js";import{S as se,a as ae,b as te,c as re,d as ie}from"./select-CmMy6Og0.js";import{I as ne}from"./input-B7sDcq_Q.js";import{T as He}from"./textarea-VhhG9ejO.js";import{A as Be,a as Ye,b as Ue}from"./alert-JDoc5ztD.js";import{C as ze}from"./circle-check-B_EWEG95.js";import{C as X}from"./circle-alert-D4GrHi1H.js";import"./label--2lUNsiq.js";import"./button-BQEhOtkV.js";import"./index-D1FBiDc7.js";import"./index-B-LzqYNY.js";import"./check-D1dpKIq3.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=Ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);var L="Tabs",[qe,ys]=we(L,[ee]),le=ee(),[Je,H]=qe(L),oe=u.forwardRef((s,a)=>{const{__scopeTabs:r,value:i,onValueChange:o,defaultValue:c,orientation:n="horizontal",dir:h,activationMode:x="automatic",...g}=s,d=$e(h),[m,p]=Se({prop:i,onChange:o,defaultProp:c});return e.jsx(Je,{scope:r,baseId:Ge(),value:m,onValueChange:p,orientation:n,dir:d,activationMode:x,children:e.jsx(M.div,{dir:d,"data-orientation":n,...g,ref:a})})});oe.displayName=L;var ce="TabsList",de=u.forwardRef((s,a)=>{const{__scopeTabs:r,loop:i=!0,...o}=s,c=H(ce,r),n=le(r);return e.jsx(_e,{asChild:!0,...n,orientation:c.orientation,dir:c.dir,loop:i,children:e.jsx(M.div,{role:"tablist","aria-orientation":c.orientation,...o,ref:a})})});de.displayName=ce;var me="TabsTrigger",ue=u.forwardRef((s,a)=>{const{__scopeTabs:r,value:i,disabled:o=!1,...c}=s,n=H(me,r),h=le(r),x=pe(n.baseId,i),g=ge(n.baseId,i),d=i===n.value;return e.jsx(Oe,{asChild:!0,...h,focusable:!o,active:d,children:e.jsx(M.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":g,"data-state":d?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:x,...c,ref:a,onMouseDown:k(s.onMouseDown,m=>{!o&&m.button===0&&m.ctrlKey===!1?n.onValueChange(i):m.preventDefault()}),onKeyDown:k(s.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&n.onValueChange(i)}),onFocus:k(s.onFocus,()=>{const m=n.activationMode!=="manual";!d&&!o&&m&&n.onValueChange(i)})})})});ue.displayName=me;var he="TabsContent",xe=u.forwardRef((s,a)=>{const{__scopeTabs:r,value:i,forceMount:o,children:c,...n}=s,h=H(he,r),x=pe(h.baseId,i),g=ge(h.baseId,i),d=i===h.value,m=u.useRef(d);return u.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),e.jsx(Ce,{present:o||d,children:({present:p})=>e.jsx(M.div,{"data-state":d?"active":"inactive","data-orientation":h.orientation,role:"tabpanel","aria-labelledby":x,hidden:!p,id:g,tabIndex:0,...n,ref:a,style:{...s.style,animationDuration:m.current?"0s":void 0},children:p&&c})})});xe.displayName=he;function pe(s,a){return`${s}-trigger-${a}`}function ge(s,a){return`${s}-content-${a}`}var We=oe,be=de,je=ue,fe=xe;const Qe=We,ve=u.forwardRef(({className:s,...a},r)=>e.jsx(be,{ref:r,className:G("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a}));ve.displayName=be.displayName;const E=u.forwardRef(({className:s,...a},r)=>e.jsx(je,{ref:r,className:G("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...a}));E.displayName=je.displayName;const D=u.forwardRef(({className:s,...a},r)=>e.jsx(fe,{ref:r,className:G("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a}));D.displayName=fe.displayName;const O=[{label:"Text Generation",value:"text-generation"},{label:"Image Generation",value:"image-generation"},{label:"Data Analysis",value:"data-analysis"},{label:"Conversational AI",value:"conversational-ai"},{label:"Code Generation",value:"code-generation"},{label:"Translation",value:"translation"},{label:"Other",value:"other"}],Xe=({control:s})=>e.jsx(y,{control:s,name:"category",render:({field:a})=>e.jsxs(N,{children:[e.jsx(w,{children:"Category"}),e.jsxs(se,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(S,{children:e.jsx(ae,{children:e.jsx(te,{placeholder:"Select a category"})})}),e.jsx(re,{children:O.map(r=>e.jsx(ie,{value:r.value,children:r.label},r.value))})]}),e.jsx(C,{children:"Choose the category that best fits your agent's primary function."}),e.jsx(F,{})]})}),$=[{label:"Free",value:"free"},{label:"Pay-per-use",value:"pay-per-use"},{label:"Subscription",value:"subscription"},{label:"Custom",value:"custom"}],Ze=({control:s})=>e.jsxs(e.Fragment,{children:[e.jsx(y,{control:s,name:"pricingModel",render:({field:a})=>e.jsxs(N,{children:[e.jsx(w,{children:"Pricing Model"}),e.jsxs(se,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(S,{children:e.jsx(ae,{children:e.jsx(te,{placeholder:"Select a pricing model"})})}),e.jsx(re,{children:$.map(r=>e.jsx(ie,{value:r.value,children:r.label},r.value))})]}),e.jsx(C,{children:"Choose how you want to monetize your agent."}),e.jsx(F,{})]})}),e.jsx(y,{control:s,name:"hourlyRate",render:({field:a})=>e.jsxs(N,{children:[e.jsx(w,{children:"Hourly Rate (USD)"}),e.jsx(S,{children:e.jsx(ne,{type:"number",placeholder:"0.00",min:"0",step:"0.01",disabled:s._formValues.pricingModel==="free",...a,onChange:r=>{const i=r.target.value;(i===""||!isNaN(parseFloat(i)))&&a.onChange(i===""?"":parseFloat(i))}})}),e.jsx(C,{children:s._formValues.pricingModel==="free"?"No hourly rate for free agents.":"Set the hourly rate for your agent (USD)."}),e.jsx(F,{})]})})]}),_=({control:s,name:a,label:r,placeholder:i,description:o,minHeight:c="100px"})=>e.jsx(y,{control:s,name:a,render:({field:n})=>e.jsxs(N,{children:[e.jsx(w,{children:r}),e.jsx(S,{children:e.jsx(He,{placeholder:i,className:`min-h-[${c}]`,...n})}),e.jsx(C,{children:o}),e.jsx(F,{})]})}),Z=({control:s,name:a,label:r,placeholder:i,description:o,type:c="text"})=>e.jsx(y,{control:s,name:a,render:({field:n})=>e.jsxs(N,{children:[e.jsx(w,{children:r}),e.jsx(S,{children:e.jsx(ne,{type:c,placeholder:i,...n})}),o&&e.jsx(C,{children:o}),e.jsx(F,{})]})}),es=Ve({name:j().min(3,{message:"Agent name must be at least 3 characters"}).max(100),description:j().min(10,{message:"Description must be at least 10 characters"}).max(1e3),category:j().min(1,{message:"Please select a category"}),inputFormat:j().min(3,{message:"Input format must be at least 3 characters"}).max(500),outputFormat:j().min(3,{message:"Output format must be at least 3 characters"}).max(500),pricingModel:j().min(1,{message:"Please select a pricing model"}),hourlyRate:Pe([Re().min(0,{message:"Hourly rate must be 0 or greater"}),j().refine(s=>s===""||!isNaN(parseFloat(s)),{message:"Hourly rate must be a number"})]).optional(),apiEndpoint:j().url({message:"Please enter a valid URL"}).optional().or(Ee(""))}),Ns=()=>{var z,K,q,J;const{isAuthenticated:s,userRole:a,userId:r}=Fe(),i=Ie(),o=Te(),{toast:c}=Ae(),[n,h]=u.useState("basics"),[x,g]=u.useState(!1),[d,m]=u.useState(!1),[p,B]=u.useState(null),t=De({resolver:ke(es),defaultValues:{name:"",description:"",category:"",inputFormat:"",outputFormat:"",pricingModel:"",hourlyRate:"",apiEndpoint:""}});u.useEffect(()=>{s?a!=="developer"&&a!=="admin"&&i("/dashboard"):i("/sign-in",{state:{from:o},replace:!0})},[s,a,i,o]);const ye=async l=>{try{if(console.log("Starting form submission with values:",l),g(!0),B(null),!r)throw new Error("No user ID found. Please sign in again.");const b={user_id:r,name:l.name,description:l.description,category:l.category,input_format:l.inputFormat,output_format:l.outputFormat,pricing_model:l.pricingModel,hourly_rate:l.pricingModel==="free"?null:Number(l.hourlyRate)||0,api_endpoint:l.apiEndpoint||null,status:"pending"};console.log("Creating agent with data:",b);const v=await Le.createAgent(b);if(!v)throw new Error("Failed to create agent");console.log("Agent submitted successfully:",v),m(!0),setTimeout(()=>{c({title:"Agent Submitted Successfully",description:"Your agent is now pending review by our team."})},100)}catch(b){console.error("Error submitting agent:",b),B(b.message||"Something went wrong. Please try again."),c({title:"Submission Failed",description:b.message||"Something went wrong. Please try again.",variant:"destructive"})}finally{g(!1)}};u.useEffect(()=>{console.log("Submission success state updated:",d)},[d]);const Y=()=>{if(n==="basics"){const l=["name","description","category"];l.every(v=>!t.getFieldState(v).invalid)?h("technical"):t.trigger(l)}else if(n==="technical"){const l=["inputFormat","outputFormat","pricingModel"];l.every(v=>!t.getFieldState(v).invalid)?h("review"):t.trigger(l)}},U=()=>{n==="technical"?h("basics"):n==="review"&&h("technical")};return console.log("Rendering view. submissionSuccess:",d),console.log("Current form errors:",t.formState.errors),d?e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(W,{}),e.jsx("main",{className:"flex-grow pt-24 pb-16",children:e.jsx("div",{className:"container mx-auto px-4 max-w-4xl",children:e.jsxs(I,{className:"mb-8",children:[e.jsxs(T,{children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(ze,{className:"h-6 w-6 text-green-500 mr-2"}),e.jsx(A,{children:"Submission Successful"})]}),e.jsx(V,{children:"Your agent has been submitted for review"})]}),e.jsxs(P,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[e.jsx("h3",{className:"font-semibold text-green-700 mb-2",children:"What happens next?"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-green-700",children:[e.jsx("li",{children:"Our team will review your agent submission within 1-3 business days"}),e.jsx("li",{children:"You will receive an email notification once the review is complete"}),e.jsx("li",{children:"If approved, your agent will be published to the marketplace"}),e.jsx("li",{children:"If rejected, you'll receive feedback and can make necessary changes"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Agent Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),e.jsx("p",{className:"text-base",children:t.getValues().name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Category"}),e.jsx("p",{className:"text-base",children:(z=O.find(l=>l.value===t.getValues().category))==null?void 0:z.label})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pricing"}),e.jsxs("p",{className:"text-base",children:[(K=$.find(l=>l.value===t.getValues().pricingModel))==null?void 0:K.label,t.getValues().pricingModel!=="free"&&t.getValues().hourlyRate&&` - $${t.getValues().hourlyRate}/hour`]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-base",children:t.getValues().description})]})]})]})]}),e.jsxs(R,{className:"flex justify-between",children:[e.jsx(f,{variant:"outline",onClick:()=>i("/developer"),children:"Return to Dashboard"}),e.jsx(f,{variant:"primary",onClick:()=>{t.reset(),m(!1),h("basics")},children:"Create Another Agent"})]})]})})}),e.jsx(Q,{})]}):e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(W,{}),e.jsx("main",{className:"flex-grow pt-24 pb-16",children:e.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Create AI Agent"}),e.jsx("p",{className:"text-gray-600",children:"Use this wizard to create and register your AI agent. All submissions are subject to review before being published."})]}),e.jsxs(Qe,{value:n,className:"mb-8",children:[e.jsxs(ve,{className:"grid w-full grid-cols-3",children:[e.jsx(E,{value:"basics",disabled:x,children:"1. Basic Information"}),e.jsx(E,{value:"technical",disabled:x,children:"2. Technical Details"}),e.jsx(E,{value:"review",disabled:x,children:"3. Review & Submit"})]}),e.jsx(Me,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(ye),className:"mt-8 space-y-6",children:[p&&e.jsxs(Be,{variant:"destructive",className:"mb-4",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx(Ye,{children:"Error"}),e.jsx(Ue,{children:p})]}),e.jsx(D,{value:"basics",children:e.jsxs(I,{children:[e.jsxs(T,{children:[e.jsx(A,{children:"Basic Information"}),e.jsx(V,{children:"Provide the essential details about your AI agent"})]}),e.jsxs(P,{className:"space-y-4",children:[e.jsx(Z,{control:t.control,name:"name",label:"Agent Name",placeholder:"Enter a name for your agent",description:"Choose a descriptive name that clearly indicates what your agent does."}),e.jsx(_,{control:t.control,name:"description",label:"Description",placeholder:"Describe what your agent does and what problem it solves",description:"Provide a clear description of your agent's capabilities and use cases."}),e.jsx(Xe,{control:t.control})]}),e.jsx(R,{className:"flex justify-end",children:e.jsx(f,{type:"button",onClick:Y,rightIcon:e.jsx("span",{children:"→"}),children:"Next Step"})})]})}),e.jsx(D,{value:"technical",children:e.jsxs(I,{children:[e.jsxs(T,{children:[e.jsx(A,{children:"Technical Details"}),e.jsx(V,{children:"Provide technical information about how your agent works"})]}),e.jsxs(P,{className:"space-y-4",children:[e.jsx(_,{control:t.control,name:"inputFormat",label:"Input Format",placeholder:"Describe the format of inputs your agent accepts (e.g., JSON, text, images)",description:"Detail the format, structure, and any constraints for the inputs your agent requires.",minHeight:"80px"}),e.jsx(_,{control:t.control,name:"outputFormat",label:"Output Format",placeholder:"Describe the format of outputs your agent produces",description:"Explain what your agent returns and in what format.",minHeight:"80px"}),e.jsx(Ze,{control:t.control}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{control:t.control,name:"apiEndpoint",label:"API Endpoint (Optional)",placeholder:"https://api.yourdomain.com/agent",description:"If your agent is hosted externally, provide the API endpoint. Leave empty if you don't have one yet."}),e.jsxs("div",{className:"mt-2 flex items-start space-x-2 text-sm text-blue-600",children:[e.jsx(Ke,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"You don't need to add an API key here. If your agent is approved, you'll be able to manage API keys in your developer dashboard."})]})]})]}),e.jsxs(R,{className:"flex justify-between",children:[e.jsx(f,{type:"button",variant:"outline",onClick:U,leftIcon:e.jsx("span",{children:"←"}),children:"Previous Step"}),e.jsx(f,{type:"button",onClick:Y,rightIcon:e.jsx("span",{children:"→"}),children:"Next Step"})]})]})}),e.jsx(D,{value:"review",children:e.jsxs(I,{children:[e.jsxs(T,{children:[e.jsx(A,{children:"Review & Submit"}),e.jsx(V,{children:"Review your agent details before submitting for approval"})]}),e.jsxs(P,{children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(X,{className:"h-5 w-5 text-amber-500 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-800",children:"Important Notice"}),e.jsx("p",{className:"text-amber-700 text-sm",children:"All agent submissions will be reviewed by our team before being published to the marketplace. This process typically takes 1-3 business days."})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Agent Name"}),e.jsx("p",{className:"text-base",children:t.getValues().name})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Category"}),e.jsx("p",{className:"text-base",children:((q=O.find(l=>l.value===t.getValues().category))==null?void 0:q.label)||"-"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Description"}),e.jsx("p",{className:"text-base",children:t.getValues().description})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Technical Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Input Format"}),e.jsx("p",{className:"text-base",children:t.getValues().inputFormat})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Output Format"}),e.jsx("p",{className:"text-base",children:t.getValues().outputFormat})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Pricing Model"}),e.jsxs("p",{className:"text-base",children:[((J=$.find(l=>l.value===t.getValues().pricingModel))==null?void 0:J.label)||"-",t.getValues().pricingModel!=="free"&&t.getValues().hourlyRate&&` - $${t.getValues().hourlyRate}/hour`]})]}),t.getValues().apiEndpoint&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"API Endpoint"}),e.jsx("p",{className:"text-base",children:t.getValues().apiEndpoint})]})]})]})]})]}),e.jsxs(R,{className:"flex justify-between",children:[e.jsx(f,{type:"button",variant:"outline",onClick:U,leftIcon:e.jsx("span",{children:"←"}),children:"Previous Step"}),e.jsx(f,{type:"submit",variant:"primary",disabled:x,children:x?"Submitting...":"Submit for Review"})]})]})})]})})]})]})}),e.jsx(Q,{})]})};export{Ns as default};
