import{c as h,a as D,f as k,b as S,r as l,j as e,L as o}from"./index-CPA6k6Ej.js";import{C as v,a as E,b as I,c as M,d as y,e as P}from"./card-Bw0AvyP8.js";import{B as T}from"./badge-B2XRQ_DJ.js";import{B as g}from"./button-BPL5u1sy.js";import{C as c}from"./Button-D2WzbYfw.js";import{D as L,a as F,b as O,c as _,d as q,e as B}from"./dialog-FIQ-cKoE.js";import{a as H}from"./agentService-DNIFqXhy.js";import{H as U,F as z}from"./Footer-C14Ivnmf.js";import{E as G}from"./eye-Dd8eJz2V.js";import{C as V}from"./circle-alert-D22Ow0Mh.js";import"./Combination-BUvUA-ID.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=h("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=h("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=h("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Y={from:a=>({delete:()=>({eq:(d,t)=>({eq:(u,r)=>Promise.reject(new Error(`Supabase removed, called delete on ${a}. Use agentService.deleteAgent.`))})})})},J={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",approved:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},K={"text-generation":"Text Generation","image-generation":"Image Generation","data-analysis":"Data Analysis","conversational-ai":"Conversational AI","code-generation":"Code Generation",translation:"Translation",other:"Other"},oe=()=>{const{isAuthenticated:a,userRole:d,userId:t}=D(),u=k(),{toast:r}=S(),[m,p]=l.useState([]),[A,f]=l.useState(!0),[N,i]=l.useState(!1),[x,j]=l.useState(null);if(l.useEffect(()=>{a&&t&&(async()=>{try{if(!t)return;f(!0);const n=await H.getUserAgents(t);p(n)}catch(n){console.error("Error fetching agents:",n),r({title:"Error",description:"Could not load your agents. Please try again.",variant:"destructive"})}finally{f(!1)}})()},[a,t,r]),!a||!(d==="developer"||d==="admin"))return u("/dashboard"),null;const w=s=>{j(s),i(!0)},C=async()=>{if(x)try{const{error:s}=await Y.from("ai_agents").delete().eq("id",x).eq("user_id",t);if(s&&s.message!=="Supabase removed, called delete on ai_agents. Use agentService.deleteAgent.")throw s;s&&s.message==="Supabase removed, called delete on ai_agents. Use agentService.deleteAgent."&&console.warn("[SUPABASE_REMOVAL] Mock delete called. Implement agentService.deleteAgent."),p(m.filter(n=>n.id!==x)),r({title:"Agent Deleted",description:"The agent has been successfully deleted."})}catch(s){console.error("Error deleting agent:",s),r({title:"Error",description:"Could not delete the agent. Please try again.",variant:"destructive"})}finally{i(!1),j(null)}};return e.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.jsx(U,{}),e.jsx("main",{className:"flex-grow pt-24 pb-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manage AI Agents"}),e.jsx(c,{variant:"primary",as:o,to:"/developer/create-agent",leftIcon:e.jsx(b,{className:"h-4 w-4"}),children:"Create New Agent"})]}),A?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}):m.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(s=>e.jsxs(v,{className:"flex flex-col h-full",children:[e.jsx(E,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-xl",children:s.name}),e.jsx(M,{className:"mt-1",children:K[s.category]||s.category})]}),e.jsx(T,{className:J[s.status]||"bg-gray-100",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})}),e.jsxs(y,{className:"flex-grow",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:s.description}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsx("span",{children:"Pricing:"}),e.jsx("span",{className:"font-medium capitalize",children:s.pricing_model})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Created:"}),e.jsx("span",{className:"font-medium",children:new Date(s.created_at).toLocaleDateString()})]})]})]}),e.jsxs(P,{className:"border-t pt-4 flex justify-between",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>w(s.id),children:[e.jsx($,{className:"h-4 w-4 mr-1"})," Delete"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(c,{variant:"outline",size:"sm",as:o,to:`/developer/view-agent/${s.id}`,children:[e.jsx(G,{className:"h-4 w-4 mr-1"})," View"]}),e.jsxs(c,{variant:"secondary",size:"sm",as:o,to:`/developer/edit-agent/${s.id}`,children:[e.jsx(R,{className:"h-4 w-4 mr-1"})," Edit"]})]})]})]},s.id))}):e.jsx(v,{className:"text-center py-12 bg-card",children:e.jsx(y,{children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(V,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-foreground",children:"No Agents Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You haven't created any AI agents yet. Get started by creating your first one!"}),e.jsx(c,{variant:"primary",as:o,to:"/developer/create-agent",leftIcon:e.jsx(b,{className:"h-4 w-4"}),children:"Create Your First AI Agent"})]})})})]})}),e.jsx(L,{open:N,onOpenChange:i,children:e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsx(_,{children:"Delete Agent"}),e.jsx(q,{children:"Are you sure you want to delete this agent? This action cannot be undone."})]}),e.jsxs(B,{children:[e.jsx(g,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(g,{variant:"destructive",onClick:C,children:"Delete"})]})]})}),e.jsx(z,{})]})};export{oe as default};
